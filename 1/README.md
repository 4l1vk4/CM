# Эмулятор для языка оболочки ОС 
##  Этап 1: REPL

### Общее описание
Данный проект представляет собой прототип эмулятора командной оболочки, работающего по принципу REPL (Read-Eval-Print-Loop).  
Целью первого этапа является создание минимально работоспособной версии, которая имитирует взаимодействие с консолью UNIX-подобной ОС.  

Эмулятор реализован в виде консольного приложения (CLI) и поддерживает ввод команд пользователем, разбор аргументов с учётом кавычек, обработку ошибок, а также базовые команды-заглушки.

---

### Функции и настройки

#### **Основные функции:**
**1. CLI-интерфейс**: программа работает в консоли и принимает команды в интерактивном режиме.

**2. Приглашение к вводу**: приглашение к вводу содержит имя виртуальной файловой системы — `<VFS>`.

**3. Парсер аргументов**: используется библиотека `shlex` для корректной обработки аргументов в кавычках.

**4. Обработка ошибок**: вывод сообщений при некорректном вводе (неизвестная команда, ошибка парсинга).

**5. Команды(в данный момент являются заглушками)**:

- `ls [аргументы]` — выводит сообщение о вызове команды и список аргументов;

- `cd [аргументы]` — выводит сообщение о вызове команды и список аргументов;

- `exit` — завершает работу эмулятора;
---
- Для запуска необходим только установленный Python версии 3.7 или новее.

---

### Команды для сборки и запуска
```first
git clone https://github.com/4l1vk4/CM
python3 prac1.py
```
Использование ограничено стандартным пакетом библиотек Python

### Пример использования

![Снимок экрана 2025-09-15 в 13.49.04.png](screenshots/Снимок%20экрана%202025-09-15%20в%2013.49.04.png)

## Этап 2: Конфигурация

### Общее описание
На втором этапе эмулятор расширяется, добавляя поддержку параметров командной строки и выполнение стартовых скриптов.  

Цель этапа — обеспечить гибкость конфигурации, запуск заранее подготовленных последовательностей команд и вывод отладочной информации.  

Эмулятор продолжает работать в виде консольного CLI и сохраняет все функции REPL из этапа 1.

---

### Функции и настройки

#### Параметры командной строки
- `--vfs-path [путь]` — путь к виртуальной файловой системе (VFS).  
- `--script [файл]` — путь к стартовому скрипту с командами эмулятора.  

#### Стартовый скрипт
- Команды выполняются последовательно.  
- Каждая строка отображается так, как если бы пользователь вводил её вручную (`<VFS> команда`).  
- Ошибочные строки пропускаются с выводом сообщения.  
- Если встречается команда `exit`, выполнение скрипта и всей программы завершается.  

#### REPL после скрипта
- Если в скрипте нет команды `exit`, эмулятор после его завершения переходит в интерактивный режим.  
- В интерактивном режиме сохраняются все функции REPL: ввод команд, разбор аргументов, обработка ошибок.  

#### Служебные команды
- `conf-dump` — выводит текущие параметры эмулятора в формате ключ-значение.  

#### Поддерживаемые команды
- `ls [аргументы]` — вывод аргументов.  
- `cd [аргументы]` — вывод аргументов.  
- `conf-dump` — печать параметров конфигурации.  
- `exit` — завершение работы эмулятора.  

---

### Установка и запуск
```sec
python3 1stage.py --vfs-path /tmp/vfs --script init.sh
./start.sh
```
### Пример использования
![Снимок экрана 2025-09-29 в 12.50.11.png](screenshots/Снимок%20экрана%202025-09-29%20в%2012.50.11.png)
![Снимок экрана 2025-09-29 в 12.53.26.png](screenshots/Снимок%20экрана%202025-09-29%20в%2012.53.26.png)